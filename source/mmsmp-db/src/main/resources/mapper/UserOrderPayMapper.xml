<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zbensoft.mmsmp.db.mapper.UserOrderPayMapper">
  <resultMap id="BaseResultMap" type="com.zbensoft.mmsmp.db.domain.UserOrderPay">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    <id column="user_order_pay_id" jdbcType="VARCHAR" property="userOrderPayId" />
    <result column="phone_number" jdbcType="VARCHAR" property="phoneNumber" />
    <result column="sp_info_id" jdbcType="VARCHAR" property="spInfoId" />
    <result column="product_info_id" jdbcType="VARCHAR" property="productInfoId" />
    <result column="charge_phone_number" jdbcType="VARCHAR" property="chargePhoneNumber" />
    <result column="order_time" jdbcType="TIMESTAMP" property="orderTime" />
    <result column="order_route" jdbcType="INTEGER" property="orderRoute" />
    <result column="order_type" jdbcType="INTEGER" property="orderType" />
    <result column="fee" jdbcType="DOUBLE" property="fee" />
    <result column="feature_str" jdbcType="VARCHAR" property="featureStr" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="version" jdbcType="VARCHAR" property="version" />
    <result column="not_disturb_time" jdbcType="VARCHAR" property="notDisturbTime" />
    <result column="transaction_id" jdbcType="VARCHAR" property="transactionId" />
    <result column="eff_time" jdbcType="TIMESTAMP" property="effTime" />
    <result column="area" jdbcType="VARCHAR" property="area" />
    <result column="priority" jdbcType="INTEGER" property="priority" />
    <result column="last_batch_id" jdbcType="VARCHAR" property="lastBatchId" />
    <result column="is_package" jdbcType="INTEGER" property="isPackage" />
    <result column="key_id" jdbcType="VARCHAR" property="keyId" />
  </resultMap>
  <resultMap id="selectMap" type="com.zbensoft.mmsmp.db.domain.AccessSendStatistics">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:49 CST 2018.
    -->
    <result column="product_info_id" jdbcType="VARCHAR" property="productInfoId" />
    <result column="order_count" jdbcType="NUMERIC" property="orderCount" />
    <result column="ondemand_count" jdbcType="NUMERIC" property="ondemandCount" />
    <result column="order_fee" jdbcType="DOUBLE" property="orderFee" />
    <result column="ondemand_fee" jdbcType="DOUBLE" property="ondemandFee" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    user_order_pay_id, phone_number, sp_info_id, product_info_id, charge_phone_number, 
    order_time, order_route, order_type, fee, feature_str, status, version, not_disturb_time, 
    transaction_id, eff_time, area, priority, last_batch_id, is_package,key_id
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from user_order_pay
    where user_order_pay_id = #{userOrderPayId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    delete from user_order_pay
    where user_order_pay_id = #{userOrderPayId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderPay">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    insert into user_order_pay (user_order_pay_id, phone_number, sp_info_id, 
      product_info_id, charge_phone_number, order_time, 
      order_route, order_type, fee, 
      feature_str, status, version, 
      not_disturb_time, transaction_id, eff_time, 
      area, priority, last_batch_id, 
      is_package,key_id)
    values (#{userOrderPayId,jdbcType=VARCHAR}, #{phoneNumber,jdbcType=VARCHAR}, #{spInfoId,jdbcType=VARCHAR}, 
      #{productInfoId,jdbcType=VARCHAR}, #{chargePhoneNumber,jdbcType=VARCHAR}, #{orderTime,jdbcType=TIMESTAMP}, 
      #{orderRoute,jdbcType=INTEGER}, #{orderType,jdbcType=INTEGER}, #{fee,jdbcType=DOUBLE}, 
      #{featureStr,jdbcType=VARCHAR}, #{status,jdbcType=INTEGER}, #{version,jdbcType=VARCHAR}, 
      #{notDisturbTime,jdbcType=VARCHAR}, #{transactionId,jdbcType=VARCHAR}, #{effTime,jdbcType=TIMESTAMP}, 
      #{area,jdbcType=VARCHAR}, #{priority,jdbcType=INTEGER}, #{lastBatchId,jdbcType=VARCHAR}, 
      #{isPackage,jdbcType=INTEGER}, #{keyId,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderPay">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    insert into user_order_pay
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="userOrderPayId != null">
        user_order_pay_id,
      </if>
      <if test="phoneNumber != null">
        phone_number,
      </if>
      <if test="spInfoId != null">
        sp_info_id,
      </if>
      <if test="productInfoId != null">
        product_info_id,
      </if>
      <if test="chargePhoneNumber != null">
        charge_phone_number,
      </if>
      <if test="orderTime != null">
        order_time,
      </if>
      <if test="orderRoute != null">
        order_route,
      </if>
      <if test="orderType != null">
        order_type,
      </if>
      <if test="fee != null">
        fee,
      </if>
      <if test="featureStr != null">
        feature_str,
      </if>
      <if test="status != null">
        status,
      </if>
      <if test="version != null">
        version,
      </if>
      <if test="notDisturbTime != null">
        not_disturb_time,
      </if>
      <if test="transactionId != null">
        transaction_id,
      </if>
      <if test="effTime != null">
        eff_time,
      </if>
      <if test="area != null">
        area,
      </if>
      <if test="priority != null">
        priority,
      </if>
      <if test="lastBatchId != null">
        last_batch_id,
      </if>
      <if test="isPackage != null">
        is_package,
      </if>
       <if test="keyId != null">
        key_id,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="userOrderPayId != null">
        #{userOrderPayId,jdbcType=VARCHAR},
      </if>
      <if test="phoneNumber != null">
        #{phoneNumber,jdbcType=VARCHAR},
      </if>
      <if test="spInfoId != null">
        #{spInfoId,jdbcType=VARCHAR},
      </if>
      <if test="productInfoId != null">
        #{productInfoId,jdbcType=VARCHAR},
      </if>
      <if test="chargePhoneNumber != null">
        #{chargePhoneNumber,jdbcType=VARCHAR},
      </if>
      <if test="orderTime != null">
        #{orderTime,jdbcType=TIMESTAMP},
      </if>
      <if test="orderRoute != null">
        #{orderRoute,jdbcType=INTEGER},
      </if>
      <if test="orderType != null">
        #{orderType,jdbcType=INTEGER},
      </if>
      <if test="fee != null">
        #{fee,jdbcType=DOUBLE},
      </if>
      <if test="featureStr != null">
        #{featureStr,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=INTEGER},
      </if>
      <if test="version != null">
        #{version,jdbcType=VARCHAR},
      </if>
      <if test="notDisturbTime != null">
        #{notDisturbTime,jdbcType=VARCHAR},
      </if>
      <if test="transactionId != null">
        #{transactionId,jdbcType=VARCHAR},
      </if>
      <if test="effTime != null">
        #{effTime,jdbcType=TIMESTAMP},
      </if>
      <if test="area != null">
        #{area,jdbcType=VARCHAR},
      </if>
      <if test="priority != null">
        #{priority,jdbcType=INTEGER},
      </if>
      <if test="lastBatchId != null">
        #{lastBatchId,jdbcType=VARCHAR},
      </if>
      <if test="isPackage != null">
        #{isPackage,jdbcType=INTEGER},
      </if>
      <if test="keyId != null">
        #{keyId,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderPay">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    update user_order_pay
    <set>
      <if test="phoneNumber != null">
        phone_number = #{phoneNumber,jdbcType=VARCHAR},
      </if>
      <if test="spInfoId != null">
        sp_info_id = #{spInfoId,jdbcType=VARCHAR},
      </if>
      <if test="productInfoId != null">
        product_info_id = #{productInfoId,jdbcType=VARCHAR},
      </if>
      <if test="chargePhoneNumber != null">
        charge_phone_number = #{chargePhoneNumber,jdbcType=VARCHAR},
      </if>
      <if test="orderTime != null">
        order_time = #{orderTime,jdbcType=TIMESTAMP},
      </if>
      <if test="orderRoute != null">
        order_route = #{orderRoute,jdbcType=INTEGER},
      </if>
      <if test="orderType != null">
        order_type = #{orderType,jdbcType=INTEGER},
      </if>
      <if test="fee != null">
        fee = #{fee,jdbcType=DOUBLE},
      </if>
      <if test="featureStr != null">
        feature_str = #{featureStr,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="version != null">
        version = #{version,jdbcType=VARCHAR},
      </if>
      <if test="notDisturbTime != null">
        not_disturb_time = #{notDisturbTime,jdbcType=VARCHAR},
      </if>
      <if test="transactionId != null">
        transaction_id = #{transactionId,jdbcType=VARCHAR},
      </if>
      <if test="effTime != null">
        eff_time = #{effTime,jdbcType=TIMESTAMP},
      </if>
      <if test="area != null">
        area = #{area,jdbcType=VARCHAR},
      </if>
      <if test="priority != null">
        priority = #{priority,jdbcType=INTEGER},
      </if>
      <if test="lastBatchId != null">
        last_batch_id = #{lastBatchId,jdbcType=VARCHAR},
      </if>
      <if test="isPackage != null">
        is_package = #{isPackage,jdbcType=INTEGER},
      </if>
       <if test="keyId != null">
        key_id = #{keyId,jdbcType=VARCHAR},
      </if>
    </set>
    where user_order_pay_id = #{userOrderPayId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderPay">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    update user_order_pay
    set phone_number = #{phoneNumber,jdbcType=VARCHAR},
      sp_info_id = #{spInfoId,jdbcType=VARCHAR},
      product_info_id = #{productInfoId,jdbcType=VARCHAR},
      charge_phone_number = #{chargePhoneNumber,jdbcType=VARCHAR},
      order_time = #{orderTime,jdbcType=TIMESTAMP},
      order_route = #{orderRoute,jdbcType=INTEGER},
      order_type = #{orderType,jdbcType=INTEGER},
      fee = #{fee,jdbcType=DOUBLE},
      feature_str = #{featureStr,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      version = #{version,jdbcType=VARCHAR},
      not_disturb_time = #{notDisturbTime,jdbcType=VARCHAR},
      transaction_id = #{transactionId,jdbcType=VARCHAR},
      eff_time = #{effTime,jdbcType=TIMESTAMP},
      area = #{area,jdbcType=VARCHAR},
      priority = #{priority,jdbcType=INTEGER},
      last_batch_id = #{lastBatchId,jdbcType=VARCHAR},
      is_package = #{isPackage,jdbcType=INTEGER},
      key_id = #{keyId,jdbcType=VARCHAR}
    where user_order_pay_id = #{userOrderPayId,jdbcType=VARCHAR}
  </update>
     <select id="selectPage" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderPay" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from user_order_pay where 1=1
     <if test=" null != userOrderPayId and '' != userOrderPayId and 'undefined'!= userOrderPayId">
        and user_order_pay_id = #{userOrderPayId,jdbcType=VARCHAR}
     </if>
     <if test=" null != phoneNumber and '' != phoneNumber and 'undefined'!= phoneNumber">
        and phone_number = #{phoneNumber,jdbcType=VARCHAR}
     </if>
      <if test=" null != spInfoId and '' != spInfoId and 'undefined'!= spInfoId ">
        and sp_info_id = #{spInfoId,jdbcType=VARCHAR}
     </if>
      <if test=" null != productInfoId and '' != productInfoId and 'undefined'!= productInfoId ">
        and product_info_id = #{productInfoId,jdbcType=VARCHAR}
     </if>
      <if test=" null != chargePhoneNumber and '' != chargePhoneNumber and 'undefined'!= chargePhoneNumber ">
        and charge_phone_number = #{chargePhoneNumber,jdbcType=VARCHAR}
     </if>
      <if test=" null != orderTime and '' != orderTime and 'undefined'!= orderTime">
        and order_time = #{orderTime,jdbcType=TIMESTAMP}
     </if>
      <if test=" null != orderRoute ">
        and order_route = #{orderRoute,jdbcType=INTEGER}
     </if>
      <if test=" null != orderType ">
        and order_type = #{orderType,jdbcType=INTEGER}
     </if>
      <if test=" null != fee ">
        and fee = #{fee,jdbcType=DOUBLE}
     </if>
     <if test=" null != featureStr and '' != featureStr and 'undefined'!= featureStr">
        and feature_str = #{featureStr,jdbcType=VARCHAR}
     </if>
     <if test=" null != status ">
        and status = #{status,jdbcType=INTEGER}
     </if>
     <if test=" null != version and '' != version and 'undefined'!= version">
        and version = #{version,jdbcType=VARCHAR}
     </if>
     <if test=" null != notDisturbTime and '' != notDisturbTime and 'undefined'!= notDisturbTime">
        and not_disturb_time = #{notDisturbTime,jdbcType=VARCHAR}
     </if>
      <if test=" null != transactionId and '' != transactionId and 'undefined'!= transactionId">
        and transaction_id = #{transactionId,jdbcType=TIMESTAMP}
     </if>
      <if test=" null != effTime and '' != effTime and 'undefined'!= effTime">
        and eff_time = #{effTime,jdbcType=TIMESTAMP}
     </if>
     <if test=" null != area and '' != area and 'undefined'!= area">
        and area = #{area,jdbcType=VARCHAR}
     </if>
     <if test=" null != priority and '' != priority and 'undefined'!= priority">
        and priority = #{priority,jdbcType=VARCHAR}
     </if>
     <if test=" null != lastBatchId and '' != lastBatchId and 'undefined'!= lastBatchId">
        and last_batch_id = #{lastBatchId,jdbcType=VARCHAR}
     </if>
      <if test=" null != isPackage ">
        and is_package = #{isPackage,jdbcType=INTEGER}
     </if>
       <if test=" null != keyId and '' != keyId and 'undefined'!= keyId">
        and key_id = #{keyId,jdbcType=VARCHAR}
     </if>
  </select>
    <select id="count" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderPay" resultType="int">
    select 
    count(1)
    from user_order_pay where 1=1
     <if test=" null != userOrderPayId and '' != userOrderPayId and 'undefined'!= userOrderPayId">
        and user_order_pay_id = #{userOrderPayId,jdbcType=VARCHAR}
     </if>
      <if test=" null != phoneNumber and '' != phoneNumber and 'undefined'!= phoneNumber">
        and phone_number = #{phoneNumber,jdbcType=VARCHAR}
     </if>
      <if test=" null != spInfoId and '' != spInfoId and 'undefined'!= spInfoId ">
        and sp_info_id = #{spInfoId,jdbcType=VARCHAR}
     </if>
      <if test=" null != productInfoId and '' != productInfoId and 'undefined'!= productInfoId ">
        and product_info_id = #{productInfoId,jdbcType=VARCHAR}
     </if>
      <if test=" null != chargePhoneNumber and '' != chargePhoneNumber and 'undefined'!= chargePhoneNumber ">
        and charge_phone_number = #{chargePhoneNumber,jdbcType=VARCHAR}
     </if>
      <if test=" null != orderTime and '' != orderTime and 'undefined'!= orderTime">
        and order_time = #{orderTime,jdbcType=TIMESTAMP}
     </if>
      <if test=" null != orderRoute ">
        and order_route = #{orderRoute,jdbcType=INTEGER}
     </if>
      <if test=" null != orderType ">
        and order_type = #{orderType,jdbcType=INTEGER}
     </if>
      <if test=" null != fee ">
        and fee = #{fee,jdbcType=DOUBLE}
     </if>
     <if test=" null != featureStr and '' != featureStr and 'undefined'!= featureStr">
        and feature_str = #{featureStr,jdbcType=VARCHAR}
     </if>
     <if test=" null != status ">
        and status = #{status,jdbcType=INTEGER}
     </if>
     <if test=" null != version and '' != version and 'undefined'!= version">
        and version = #{version,jdbcType=VARCHAR}
     </if>
     <if test=" null != notDisturbTime and '' != notDisturbTime and 'undefined'!= notDisturbTime">
        and not_disturb_time = #{notDisturbTime,jdbcType=VARCHAR}
     </if>
      <if test=" null != transactionId and '' != transactionId and 'undefined'!= transactionId">
        and transaction_id = #{transactionId,jdbcType=TIMESTAMP}
     </if>
      <if test=" null != effTime and '' != effTime and 'undefined'!= effTime">
        and eff_time = #{effTime,jdbcType=TIMESTAMP}
     </if>
     <if test=" null != area and '' != area and 'undefined'!= area">
        and area = #{area,jdbcType=VARCHAR}
     </if>
     <if test=" null != priority and '' != priority and 'undefined'!= priority">
        and priority = #{priority,jdbcType=VARCHAR}
     </if>
     <if test=" null != lastBatchId and '' != lastBatchId and 'undefined'!= lastBatchId">
        and last_batch_id = #{lastBatchId,jdbcType=VARCHAR}
     </if>
      <if test=" null != isPackage ">
        and is_package = #{isPackage,jdbcType=INTEGER}
     </if>
      <if test=" null != keyId and '' != keyId and 'undefined'!= keyId">
        and key_id = #{keyId,jdbcType=VARCHAR}
     </if>
  </select>
  <delete id="deleteByPnPi" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderPay">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:07 CST 2018.
    -->
    delete from user_order_pay
    where phone_number = #{phoneNumber,jdbcType=VARCHAR} and  product_info_id = #{productInfoId,jdbcType=VARCHAR}
  </delete>
  
  <select id="selectByPhoneNumberAndProductInfoId" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderPay" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from user_order_pay where 1=1
     <if test=" null != phoneNumber and '' != phoneNumber and 'undefined'!= phoneNumber">
        and phone_number = #{phoneNumber,jdbcType=VARCHAR}
     </if>
     <if test=" null != productInfoId and '' != productInfoId and 'undefined'!= productInfoId ">
        and product_info_id = #{productInfoId,jdbcType=VARCHAR}
     </if>
   </select>
    <select id="selectCountByOrderAndProductInfoId" parameterType="com.zbensoft.mmsmp.db.domain.AccessSendStatistics" resultMap="selectMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:49 CST 2018.
    -->
    select 
    count(*) as order_count,uo.product_info_id
    from user_order_pay uo
    where 1=1 
    <if test=" null != productInfoId and '' != productInfoId and 'undefined'!= productInfoId ">
        and uo.product_info_id = #{productInfoId,jdbcType=VARCHAR}
    </if>
     <if test=" null != keyId and '' != keyId and 'undefined'!= keyId ">
        and uo.key_id = #{keyId,jdbcType=VARCHAR}
    </if>
    <if test="timeStart != null and timeStart !=''">
        <![CDATA[   and DATE_FORMAT(uo.order_time, '%Y-%m-%d %H:%i:%S')>=  DATE_FORMAT(#{timeStart}, '%Y-%m-%d %H:%i:%S')   ]]>  
      </if>
      <if test="timeEnd != null and timeEnd !=''">
       <![CDATA[   and DATE_FORMAT(uo.order_time, '%Y-%m-%d %H:%i:%S')<=  DATE_FORMAT(#{timeEnd}, '%Y-%m-%d %H:%i:%S')   ]]>  
      </if>
      and uo.order_type = 1
      group by uo.product_info_id
  </select>
   <select id="selectCountByOnDemandAndProductInfoId" parameterType="com.zbensoft.mmsmp.db.domain.AccessSendStatistics" resultMap="selectMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 14:33:49 CST 2018.
    -->
    select 
    count(*) as ondemand_count,uo.product_info_id
    from user_order_pay uo
     where 1=1 
     <if test=" null != productInfoId and '' != productInfoId and 'undefined'!= productInfoId ">
        and uo.product_info_id = #{productInfoId,jdbcType=VARCHAR}
    </if>
    <if test=" null != keyId and '' != keyId and 'undefined'!= keyId ">
        and uo.key_id = #{keyId,jdbcType=VARCHAR}
    </if>
    <if test="timeStart != null and timeStart !=''">
        <![CDATA[   and DATE_FORMAT(uo.order_time, '%Y-%m-%d %H:%i:%S')>=  DATE_FORMAT(#{timeStart}, '%Y-%m-%d %H:%i:%S')   ]]>  
      </if>
      <if test="timeEnd != null and timeEnd !=''">
       <![CDATA[   and DATE_FORMAT(uo.order_time, '%Y-%m-%d %H:%i:%S')<=  DATE_FORMAT(#{timeEnd}, '%Y-%m-%d %H:%i:%S')   ]]>  
      </if>
      and uo.order_type = 2
      group by uo.product_info_id
  </select>
</mapper>