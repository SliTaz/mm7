<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zbensoft.mmsmp.db.mapper.UserOrderHisMapper">
  <resultMap id="BaseResultMap" type="com.zbensoft.mmsmp.db.domain.UserOrderHis">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    <id column="user_order_his_id" jdbcType="VARCHAR" property="userOrderHisId" />
    <result column="phone_number" jdbcType="VARCHAR" property="phoneNumber" />
    <result column="sp_info_id" jdbcType="VARCHAR" property="spInfoId" />
    <result column="product_info_id" jdbcType="VARCHAR" property="productInfoId" />
    <result column="charge_phone_number" jdbcType="VARCHAR" property="chargePhoneNumber" />
    <result column="order_time" jdbcType="TIMESTAMP" property="orderTime" />
    <result column="cancel_time" jdbcType="TIMESTAMP" property="cancelTime" />
    <result column="order_route" jdbcType="INTEGER" property="orderRoute" />
    <result column="order_type" jdbcType="INTEGER" property="orderType" />
    <result column="fee" jdbcType="DOUBLE" property="fee" />
    <result column="cancel_route" jdbcType="INTEGER" property="cancelRoute" />
    <result column="feature_str" jdbcType="VARCHAR" property="featureStr" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="version" jdbcType="VARCHAR" property="version" />
    <result column="not_disturb_time" jdbcType="VARCHAR" property="notDisturbTime" />
    <result column="transaction_id" jdbcType="VARCHAR" property="transactionId" />
    <result column="eff_time" jdbcType="TIMESTAMP" property="effTime" />
    <result column="area" jdbcType="VARCHAR" property="area" />
    <result column="priority" jdbcType="INTEGER" property="priority" />
    <result column="last_batch_id" jdbcType="VARCHAR" property="lastBatchId" />
    <result column="is_package" jdbcType="INTEGER" property="isPackage" />
    <result column="notify_sp_flag" jdbcType="INTEGER" property="notifySpFlag" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    user_order_his_id, phone_number, sp_info_id, product_info_id, charge_phone_number, 
    order_time, cancel_time, order_route, order_type, fee, cancel_route, feature_str, 
    status, version, not_disturb_time, transaction_id, eff_time, area, priority, last_batch_id, 
    is_package,notify_sp_flag
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from user_order_his
    where user_order_his_id = #{userOrderHisId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    delete from user_order_his
    where user_order_his_id = #{userOrderHisId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    insert into user_order_his (user_order_his_id, phone_number, sp_info_id, 
      product_info_id, charge_phone_number, order_time, 
      cancel_time, order_route, order_type, 
      fee, cancel_route, feature_str, 
      status, version, not_disturb_time, 
      transaction_id, eff_time, area, 
      priority, last_batch_id, is_package,notify_sp_flag
      )
    values (#{userOrderHisId,jdbcType=VARCHAR}, #{phoneNumber,jdbcType=VARCHAR}, #{spInfoId,jdbcType=VARCHAR}, 
      #{productInfoId,jdbcType=VARCHAR}, #{chargePhoneNumber,jdbcType=VARCHAR}, #{orderTime,jdbcType=TIMESTAMP}, 
      #{cancelTime,jdbcType=TIMESTAMP}, #{orderRoute,jdbcType=INTEGER}, #{orderType,jdbcType=INTEGER}, 
      #{fee,jdbcType=DOUBLE}, #{cancelRoute,jdbcType=INTEGER}, #{featureStr,jdbcType=VARCHAR}, 
      #{status,jdbcType=INTEGER}, #{version,jdbcType=VARCHAR}, #{notDisturbTime,jdbcType=VARCHAR}, 
      #{transactionId,jdbcType=VARCHAR}, #{effTime,jdbcType=TIMESTAMP}, #{area,jdbcType=VARCHAR}, 
      #{priority,jdbcType=INTEGER}, #{lastBatchId,jdbcType=VARCHAR}, #{isPackage,jdbcType=INTEGER}, #{notifySpFlag,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    insert into user_order_his
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="userOrderHisId != null">
        user_order_his_id,
      </if>
      <if test="phoneNumber != null">
        phone_number,
      </if>
      <if test="spInfoId != null">
        sp_info_id,
      </if>
      <if test="productInfoId != null">
        product_info_id,
      </if>
      <if test="chargePhoneNumber != null">
        charge_phone_number,
      </if>
      <if test="orderTime != null">
        order_time,
      </if>
      <if test="cancelTime != null">
        cancel_time,
      </if>
      <if test="orderRoute != null">
        order_route,
      </if>
      <if test="orderType != null">
        order_type,
      </if>
      <if test="fee != null">
        fee,
      </if>
      <if test="cancelRoute != null">
        cancel_route,
      </if>
      <if test="featureStr != null">
        feature_str,
      </if>
      <if test="status != null">
        status,
      </if>
      <if test="version != null">
        version,
      </if>
      <if test="notDisturbTime != null">
        not_disturb_time,
      </if>
      <if test="transactionId != null">
        transaction_id,
      </if>
      <if test="effTime != null">
        eff_time,
      </if>
      <if test="area != null">
        area,
      </if>
      <if test="priority != null">
        priority,
      </if>
      <if test="lastBatchId != null">
        last_batch_id,
      </if>
      <if test="isPackage != null">
        is_package,
      </if>
      <if test="notifySpFlag != null">
        notify_sp_flag,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="userOrderHisId != null">
        #{userOrderHisId,jdbcType=VARCHAR},
      </if>
      <if test="phoneNumber != null">
        #{phoneNumber,jdbcType=VARCHAR},
      </if>
      <if test="spInfoId != null">
        #{spInfoId,jdbcType=VARCHAR},
      </if>
      <if test="productInfoId != null">
        #{productInfoId,jdbcType=VARCHAR},
      </if>
      <if test="chargePhoneNumber != null">
        #{chargePhoneNumber,jdbcType=VARCHAR},
      </if>
      <if test="orderTime != null">
        #{orderTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cancelTime != null">
        #{cancelTime,jdbcType=TIMESTAMP},
      </if>
      <if test="orderRoute != null">
        #{orderRoute,jdbcType=INTEGER},
      </if>
      <if test="orderType != null">
        #{orderType,jdbcType=INTEGER},
      </if>
      <if test="fee != null">
        #{fee,jdbcType=DOUBLE},
      </if>
      <if test="cancelRoute != null">
        #{cancelRoute,jdbcType=INTEGER},
      </if>
      <if test="featureStr != null">
        #{featureStr,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=INTEGER},
      </if>
      <if test="version != null">
        #{version,jdbcType=VARCHAR},
      </if>
      <if test="notDisturbTime != null">
        #{notDisturbTime,jdbcType=VARCHAR},
      </if>
      <if test="transactionId != null">
        #{transactionId,jdbcType=VARCHAR},
      </if>
      <if test="effTime != null">
        #{effTime,jdbcType=TIMESTAMP},
      </if>
      <if test="area != null">
        #{area,jdbcType=VARCHAR},
      </if>
      <if test="priority != null">
        #{priority,jdbcType=INTEGER},
      </if>
      <if test="lastBatchId != null">
        #{lastBatchId,jdbcType=VARCHAR},
      </if>
      <if test="isPackage != null">
        #{isPackage,jdbcType=INTEGER},
      </if>
      <if test="notifySpFlag != null">
        #{notifySpFlag,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    update user_order_his
    <set>
      <if test="phoneNumber != null">
        phone_number = #{phoneNumber,jdbcType=VARCHAR},
      </if>
      <if test="spInfoId != null">
        sp_info_id = #{spInfoId,jdbcType=VARCHAR},
      </if>
      <if test="productInfoId != null">
        product_info_id = #{productInfoId,jdbcType=VARCHAR},
      </if>
      <if test="chargePhoneNumber != null">
        charge_phone_number = #{chargePhoneNumber,jdbcType=VARCHAR},
      </if>
      <if test="orderTime != null">
        order_time = #{orderTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cancelTime != null">
        cancel_time = #{cancelTime,jdbcType=TIMESTAMP},
      </if>
      <if test="orderRoute != null">
        order_route = #{orderRoute,jdbcType=INTEGER},
      </if>
      <if test="orderType != null">
        order_type = #{orderType,jdbcType=INTEGER},
      </if>
      <if test="fee != null">
        fee = #{fee,jdbcType=DOUBLE},
      </if>
      <if test="cancelRoute != null">
        cancel_route = #{cancelRoute,jdbcType=INTEGER},
      </if>
      <if test="featureStr != null">
        feature_str = #{featureStr,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="version != null">
        version = #{version,jdbcType=VARCHAR},
      </if>
      <if test="notDisturbTime != null">
        not_disturb_time = #{notDisturbTime,jdbcType=VARCHAR},
      </if>
      <if test="transactionId != null">
        transaction_id = #{transactionId,jdbcType=VARCHAR},
      </if>
      <if test="effTime != null">
        eff_time = #{effTime,jdbcType=TIMESTAMP},
      </if>
      <if test="area != null">
        area = #{area,jdbcType=VARCHAR},
      </if>
      <if test="priority != null">
        priority = #{priority,jdbcType=INTEGER},
      </if>
      <if test="lastBatchId != null">
        last_batch_id = #{lastBatchId,jdbcType=VARCHAR},
      </if>
      <if test="isPackage != null">
        is_package = #{isPackage,jdbcType=INTEGER},
      </if>
      <if test="notifySpFlag != null">
        notify_sp_flag = #{notifySpFlag,jdbcType=INTEGER},
      </if>
    </set>
    where user_order_his_id = #{userOrderHisId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    update user_order_his
    set phone_number = #{phoneNumber,jdbcType=VARCHAR},
      sp_info_id = #{spInfoId,jdbcType=VARCHAR},
      product_info_id = #{productInfoId,jdbcType=VARCHAR},
      charge_phone_number = #{chargePhoneNumber,jdbcType=VARCHAR},
      order_time = #{orderTime,jdbcType=TIMESTAMP},
      cancel_time = #{cancelTime,jdbcType=TIMESTAMP},
      order_route = #{orderRoute,jdbcType=INTEGER},
      order_type = #{orderType,jdbcType=INTEGER},
      fee = #{fee,jdbcType=DOUBLE},
      cancel_route = #{cancelRoute,jdbcType=INTEGER},
      feature_str = #{featureStr,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      version = #{version,jdbcType=VARCHAR},
      not_disturb_time = #{notDisturbTime,jdbcType=VARCHAR},
      transaction_id = #{transactionId,jdbcType=VARCHAR},
      eff_time = #{effTime,jdbcType=TIMESTAMP},
      area = #{area,jdbcType=VARCHAR},
      priority = #{priority,jdbcType=INTEGER},
      last_batch_id = #{lastBatchId,jdbcType=VARCHAR},
      is_package = #{isPackage,jdbcType=INTEGER},
      notify_sp_flag = #{notifySpFlag,jdbcType=INTEGER}
    where user_order_his_id = #{userOrderHisId,jdbcType=VARCHAR}
  </update>
   <select id="selectPage" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed May 24 13:36:02 CST 2017.
    -->
       select 
    <include refid="Base_Column_List" />
    from user_order_his
        where 1=1
     <if test=" null != userOrderHisId and '' != userOrderHisId and 'undefined'!= userOrderHisId ">
        and user_order_his_id = #{userOrderHisId,jdbcType=VARCHAR}
     </if>
     <if test=" null != phoneNumber and '' != phoneNumber and 'undefined'!= phoneNumber">
        and phone_number = #{phoneNumber,jdbcType=VARCHAR}
     </if>
      <if test=" null != spInfoId and '' != spInfoId and 'undefined'!= spInfoId">
        and sp_info_id = #{spInfoId,jdbcType=VARCHAR}
     </if>
     <if test=" null != productInfoId and '' != productInfoId and 'undefined'!= productInfoId">
        and product_info_id = #{productInfoId,jdbcType=VARCHAR}
     </if>
     <if test=" null != chargePhoneNumber and '' != chargePhoneNumber and 'undefined'!= chargePhoneNumber">
        and charge_phone_number = #{chargePhoneNumber,jdbcType=VARCHAR}
     </if>
     <if test=" null != orderRoute ">
        and order_route = #{orderRoute,jdbcType=INTEGER}
     </if>
      <if test=" null != orderType">
        and order_type = #{orderType,jdbcType=INTEGER}
     </if>
      <if test=" null != fee ">
        and fee = #{fee,jdbcType=DOUBLE}
     </if>
      <if test=" null != cancelRoute ">
        and cancel_route = #{cancelRoute,jdbcType=INTEGER}
     </if>
     <if test=" null != featureStr and '' != featureStr and 'undefined'!= featureStr">
        and feature_str = #{featureStr,jdbcType=VARCHAR}
     </if>
      <if test=" null != status ">
        and status = #{status,jdbcType=INTEGER}
     </if>
     <if test=" null != version and '' != version and 'undefined'!= version">
        and version = #{version,jdbcType=VARCHAR}
     </if>
     <if test=" null != notDisturbTime and '' != notDisturbTime and 'undefined'!= notDisturbTime">
        and not_disturb_time = #{notDisturbTime,jdbcType=VARCHAR}
     </if>
     <if test=" null != transactionId and '' != transactionId and 'undefined'!= transactionId">
        and transaction_id = #{transactionId,jdbcType=VARCHAR}
     </if>
     <if test=" null != area and '' != area and 'undefined'!= area">
        and area = #{area,jdbcType=VARCHAR}
     </if>
      <if test=" null != priority ">
        and priority = #{priority,jdbcType=INTEGER}
     </if>
     <if test=" null != lastBatchId and '' != lastBatchId and 'undefined'!= lastBatchId">
        and last_batch_id = #{lastBatchId,jdbcType=VARCHAR}
     </if>
     <if test=" null != isPackage">
        and is_package = #{isPackage,jdbcType=Integer}
     </if>
     <if test=" null != notifySpFlag">
        and notify_sp_flag = #{isPackage,jdbcType=Integer}
     </if>
     <if test="orderTimeStart != null and orderTimeStart !=''">
        <![CDATA[   and DATE_FORMAT(order_time, '%Y-%m-%d %H:%i:%S')>=  DATE_FORMAT(#{orderTimeStart}, '%Y-%m-%d %H:%i:%S')   ]]>  
      </if>
      <if test="orderTimeEnd != null and orderTimeEnd !=''">
       <![CDATA[   and DATE_FORMAT(order_time, '%Y-%m-%d %H:%i:%S')<=  DATE_FORMAT(#{orderTimeEnd}, '%Y-%m-%d %H:%i:%S')   ]]>  
      </if>
      order by order_time desc
  </select>
  <select id="count" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis" resultType="int">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed May 24 13:36:02 CST 2017.
    -->
     select 
    count(1)
    from user_order_his
      where 1=1
      <if test=" null != userOrderHisId and '' != userOrderHisId and 'undefined'!= userOrderHisId ">
        and user_order_his_id = #{userOrderHisId,jdbcType=VARCHAR}
     </if>
     <if test=" null != phoneNumber and '' != phoneNumber and 'undefined'!= phoneNumber">
        and phone_number = #{phoneNumber,jdbcType=VARCHAR}
     </if>
      <if test=" null != spInfoId and '' != spInfoId and 'undefined'!= spInfoId">
        and sp_info_id = #{spInfoId,jdbcType=VARCHAR}
     </if>
     <if test=" null != productInfoId and '' != productInfoId and 'undefined'!= productInfoId">
        and product_info_id = #{productInfoId,jdbcType=VARCHAR}
     </if>
     <if test=" null != chargePhoneNumber and '' != chargePhoneNumber and 'undefined'!= chargePhoneNumber">
        and charge_phone_number = #{chargePhoneNumber,jdbcType=VARCHAR}
     </if>
     <if test=" null != orderRoute ">
        and order_route = #{orderRoute,jdbcType=INTEGER}
     </if>
      <if test=" null != orderType">
        and order_type = #{orderType,jdbcType=INTEGER}
     </if>
      <if test=" null != fee ">
        and fee = #{fee,jdbcType=DOUBLE}
     </if>
      <if test=" null != cancelRoute ">
        and cancel_route = #{cancelRoute,jdbcType=INTEGER}
     </if>
     <if test=" null != featureStr and '' != featureStr and 'undefined'!= featureStr">
        and feature_str = #{featureStr,jdbcType=VARCHAR}
     </if>
      <if test=" null != status ">
        and status = #{status,jdbcType=INTEGER}
     </if>
     <if test=" null != version and '' != version and 'undefined'!= version">
        and version = #{version,jdbcType=VARCHAR}
     </if>
     <if test=" null != notDisturbTime and '' != notDisturbTime and 'undefined'!= notDisturbTime">
        and not_disturb_time = #{notDisturbTime,jdbcType=VARCHAR}
     </if>
     <if test=" null != transactionId and '' != transactionId and 'undefined'!= transactionId">
        and transaction_id = #{transactionId,jdbcType=VARCHAR}
     </if>
     <if test=" null != area and '' != area and 'undefined'!= area">
        and area = #{area,jdbcType=VARCHAR}
     </if>
      <if test=" null != priority ">
        and priority = #{priority,jdbcType=INTEGER}
     </if>
     <if test=" null != lastBatchId and '' != lastBatchId and 'undefined'!= lastBatchId">
        and last_batch_id = #{lastBatchId,jdbcType=VARCHAR}
     </if>
     <if test=" null != isPackage">
        and is_package = #{isPackage,jdbcType=Integer}
     </if>
      <if test=" null != notifySpFlag">
        and notify_sp_flag = #{isPackage,jdbcType=Integer}
     </if>
     <if test="orderTimeStart != null and orderTimeStart !=''">
        <![CDATA[   and DATE_FORMAT(order_time, '%Y-%m-%d %H:%i:%S')>=  DATE_FORMAT(#{orderTimeStart}, '%Y-%m-%d %H:%i:%S')   ]]>  
      </if>
      <if test="orderTimeEnd != null and orderTimeEnd !=''">
       <![CDATA[   and DATE_FORMAT(order_time, '%Y-%m-%d %H:%i:%S')<=  DATE_FORMAT(#{orderTimeEnd}, '%Y-%m-%d %H:%i:%S')   ]]>  
      </if>
  </select>
  
   <select id="selectByPhoneAndProductId" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 27 11:26:29 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from user_order_his
    where phone_number = #{phoneNumber,jdbcType=VARCHAR} and product_info_id = #{productInfoId,jdbcType=VARCHAR}
  </select>
  
  <update id="updateStatus" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis">
    update user_order_his
    set 
      cancel_time = #{cancelTime,jdbcType=TIMESTAMP},
      status = #{status,jdbcType=INTEGER}
    where 
    	phone_number = #{phoneNumber,jdbcType=VARCHAR} 
    	and 
    	product_info_id = #{productInfoId,jdbcType=VARCHAR} 
  </update>
  
  <update id="updateStatusByPhoneNumber" parameterType="com.zbensoft.mmsmp.db.domain.UserOrderHis">
    update user_order_his
    set 
      cancel_time = #{cancelTime,jdbcType=TIMESTAMP},
      status = #{status,jdbcType=INTEGER}
    where 
    	phone_number = #{phoneNumber,jdbcType=VARCHAR} 
  </update>
</mapper>